(this.webpackJsonparcgis=this.webpackJsonparcgis||[]).push([[89],{347:function(e,a,n){"use strict";n.r(a),n.d(a,"fromUrl",(function(){return u}));var t=n(6),r=n(13),l=n(45),s=n(106),i=n(472);async function u(e){const a=await async function(e){const a=Object(s.e)(e);if(!a)throw new r.a("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:e});const{serverType:n,sublayer:t}=a;let l;const u={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"};switch(n){case"MapServer":l=null!=t?"FeatureLayer":async function(e){return(await o(e)).tileInfo}(e).then((e=>e?"TileLayer":"MapImageLayer"));break;case"ImageServer":l=o(e).then((e=>{const a=e.tileInfo&&e.tileInfo.format;return e.tileInfo?!a||"LERC"!==a.toUpperCase()||e.cacheType&&"elevation"!==e.cacheType.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer"}));break;case"SceneServer":l=o(a.url.path).then((e=>{const a={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};if(e&&Array.isArray(e.layers)&&e.layers.length>0){const n=e.layers[0].layerType;if(null!=a[n])return a[n]}return"SceneLayer"}));break;default:l=u[n]}const y="FeatureServer"===n,d={parsedUrl:a,Constructor:null,layerOrTableId:y?t:null,sublayerIds:null,tableIds:null},f=await l;if({FeatureLayer:!0,SceneLayer:!0}[f]&&null==t){const a=await async function(e,a){var n,t;let r,l=!1;if("FeatureServer"===a){const a=await async function(e){var a,n;let t=await o(e);t=t||{},t.layers=(null==(a=t.layers)?void 0:a.filter(c))||[];const r={serviceJSON:t};if(t.currentVersion<10.5)return r;const l=await o(e+"/layers");return r.layersJSON={layers:(null==l||null==(n=l.layers)?void 0:n.filter(c))||[],tables:(null==l?void 0:l.tables)||[]},r}(e);l=!!a.layersJSON,r=a.layersJSON||a.serviceJSON}else r=await o(e);const s=null==(n=r)?void 0:n.layers,i=null==(t=r)?void 0:t.tables;return{layerIds:(null==s?void 0:s.map((e=>e.id)).reverse())||[],tableIds:(null==i?void 0:i.map((e=>e.id)).reverse())||[],layerInfos:l?s:[],tableInfos:l?i:[]}}(e,n);if(y&&(d.sublayerInfos=a.layerInfos,d.tableInfos=a.tableInfos),1!==a.layerIds.length+a.tableIds.length)d.sublayerIds=a.layerIds,d.tableIds=a.tableIds;else if(y){var b,h;d.layerOrTableId=null!=(b=a.layerIds[0])?b:a.tableIds[0],d.sourceJSON=null!=(h=a.layerInfos[0])?h:a.tableInfos[0]}}return d.Constructor=await async function(e){return(0,i.a[e])()}(f),d}(e.url),l={...e.properties,url:e.url};if(!a.sublayerIds)return null!=a.layerOrTableId&&(l.layerId=a.layerOrTableId,l.sourceJSON=a.sourceJSON),new a.Constructor(l);const u=new(0,(await n.e(30).then(n.bind(null,517))).default)({title:a.parsedUrl.title});return function(e,a,n){function r(e,r){const l={...n,layerId:e,sublayerTitleMode:"service-name"};return Object(t.h)(r)&&(l.sourceJSON=r),new a.Constructor(l)}a.sublayerIds.forEach((n=>{const t=r(n,y(a.sublayerInfos,n));e.add(t)})),a.tableIds.forEach((n=>{const t=r(n,y(a.tableInfos,n));e.tables.add(t)}))}(u,a,l),u}function y(e,a){return e?e.find((e=>e.id===a)):null}function c(e){return!e.type||"Feature Layer"===e.type}async function o(e){return(await Object(l.default)(e,{responseType:"json",query:{f:"json"}})).data}},472:function(e,a,n){"use strict";n.d(a,"a",(function(){return t}));const t={BingMapsLayer:async()=>(await n.e(140).then(n.bind(null,574))).default,BuildingSceneLayer:async()=>(await Promise.all([n.e(20),n.e(141)]).then(n.bind(null,561))).default,CSVLayer:async()=>(await n.e(86).then(n.bind(null,575))).default,ElevationLayer:async()=>(await n.e(23).then(n.bind(null,572))).default,FeatureLayer:async()=>(await Promise.resolve().then(n.bind(null,264))).default,GroupLayer:async()=>(await n.e(30).then(n.bind(null,517))).default,GeoRSSLayer:async()=>(await n.e(142).then(n.bind(null,545))).default,ImageryLayer:async()=>(await Promise.all([n.e(10),n.e(17),n.e(87)]).then(n.bind(null,563))).default,ImageryTileLayer:async()=>(await Promise.all([n.e(10),n.e(17),n.e(62)]).then(n.bind(null,562))).default,IntegratedMeshLayer:async()=>(await n.e(60).then(n.bind(null,570))).default,KMLLayer:async()=>(await n.e(71).then(n.bind(null,576))).default,MapImageLayer:async()=>(await Promise.all([n.e(12),n.e(26)]).then(n.bind(null,543))).default,MapNotesLayer:async()=>(await n.e(143).then(n.bind(null,549))).default,OpenStreetMapLayer:async()=>(await n.e(72).then(n.bind(null,550))).default,PointCloudLayer:async()=>(await n.e(52).then(n.bind(null,564))).default,RouteLayer:async()=>(await n.e(144).then(n.bind(null,551))).default,SceneLayer:async()=>(await Promise.all([n.e(20),n.e(145)]).then(n.bind(null,577))).default,StreamLayer:async()=>(await n.e(146).then(n.bind(null,578))).default,TileLayer:async()=>(await Promise.all([n.e(12),n.e(65)]).then(n.bind(null,552))).default,UnknownLayer:async()=>(await n.e(147).then(n.bind(null,553))).default,UnsupportedLayer:async()=>(await n.e(148).then(n.bind(null,554))).default,VectorTileLayer:async()=>(await Promise.all([n.e(27),n.e(55)]).then(n.bind(null,565))).default,WebTileLayer:async()=>(await n.e(88).then(n.bind(null,478))).default,WMSLayer:async()=>(await n.e(64).then(n.bind(null,579))).default,WMTSLayer:async()=>(await n.e(73).then(n.bind(null,567))).default}}}]);
//# sourceMappingURL=89.003bbf02.chunk.js.map