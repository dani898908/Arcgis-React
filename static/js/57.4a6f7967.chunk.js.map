{"version":3,"sources":["../node_modules/@arcgis/core/geometry/support/aaBoundingBox.js","../node_modules/@arcgis/core/views/2d/layers/features/support/whereUtils.js","../node_modules/@arcgis/core/layers/graphics/data/FeatureFilter.js","../node_modules/@arcgis/core/layers/graphics/data/timeSupport.js","../node_modules/@arcgis/core/layers/graphics/contains.js","../node_modules/@arcgis/core/chunks/spatialQuerySupport.js","../node_modules/@arcgis/core/views/2d/arcade/callExpressionWithCursor.js","../node_modules/@arcgis/core/views/2d/layers/features/Store2D.js","../node_modules/@arcgis/core/views/2d/layers/features/FeatureStore2D.js"],"names":["i","n","D","a","t","r","u","e","m","o","Math","min","max","h","x","length","f","l","I","y","p","d","q","w","A","C","G","Number","NEGATIVE_INFINITY","POSITIVE_INFINITY","O","S","getLogger","getAttribute","field","_","constructor","this","_geometryBounds","_idToVisibility","Map","_serviceInfo","_hash","check","_applyFilter","clear","_resetAllHiddenIds","update","show","hide","invalidate","forEach","set","setKnownIds","setTrue","s","Set","get","has","push","createQuery","geometry","spatialRel","where","timeExtent","objectIds","fromJSON","JSON","stringify","_setGeometryFilter","_setIdFilter","_setAttributeFilter","_setTimeFilter","_clause","async","WhereClause","create","isStandardized","error","readArcadeFeature","testFeature","warn","fieldsIndex","_idsToShow","_idsToHide","hiddenIds","_spatialQueryOperator","geometryType","hasZ","hasM","_timeOperator","timeInfo","_filterByGeometry","_filterById","_filterByTime","_filterByExpression","size","getObjectId","readHydratedGeometry","featureAdapter","startTimeField","endTimeField","isNaN","start","end","c","coords","lengths","g","E","esriSRUnit_Meter","esriSRUnit_Kilometer","esriSRUnit_Foot","esriSRUnit_StatuteMile","esriSRUnit_NauticalMile","esriSRUnit_USNauticalMile","N","Object","freeze","b","J","esriGeometryPoint","j","esriGeometryPolyline","U","esriGeometryPolygon","M","esriGeometryMultipoint","P","Z","B","T","outFields","orderByFields","groupByFieldsForStatistics","outStatistics","trim","onStatisticField","outSR","spatialReference","W","test","distance","units","then","L","geodesicBuffer","toJSON","k","parse","K","Q","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","V","$","esriGeometryEnvelope","H","Y","F","bind","ee","query","R","te","rings","referencesGeometry","evaluate","$feature","_canCacheExpressionValue","_sourceInfo","_bitsets","computed","getBitset","createBitset","_schema","console","debug","targets","name","attributes","type","_createArcadeComputedField","_createLabelArcadeComputedField","_computedFields","some","expression","referencesScale","_statisticFields","setComputedAttributes","_evaluateField","resultType","setComputedNumericAtIndex","fieldIndex","setComputedStringAtIndex","valueExpression","fields","createLabelFunction","label","builder","$view","scale","getAttributes","readAttributes","readAttribute","cloneWithGeometry","getGeometry","getCentroid","readCentroid","super","events","_featureSetsByInstance","_objectIdToDisplayId","_spatialIndexInvalid","_index","minX","_storage","getXMin","minY","getYMin","maxX","getXMax","maxY","getYMax","featureCount","vertexCount","onTileData","addOrUpdate","instance","getCursor","next","getIndex","createDisplayId","setDisplayId","setInstanceId","emit","getInstanceId","_lookupFeature","forEachUnsafe","_getFeatureSet","setIndex","forEachInBounds","_searchIndex","lookupFeatureByDisplayId","forEachBounds","_rebuildIndex","readGeometry","getDisplayId","sweepFeatures","releaseDisplayId","delete","sweepFeatureSets","lookupObjectId","lookupDisplayId","lookupByDisplayIdUnsafe","hasInstance","setBounds","load","search"],"mappings":"mGAAA,kdAIsH,SAASA,EAAEC,EAAEC,GAAG,MAAM,CAACD,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,IAAI,SAASE,EAAEF,EAAEG,EAAEC,EAAEF,EAAEG,EAAEC,EAAEC,EAAER,KAAK,OAAOQ,EAAE,GAAGP,EAAEO,EAAE,GAAGJ,EAAEI,EAAE,GAAGH,EAAEG,EAAE,GAAGL,EAAEK,EAAE,GAAGF,EAAEE,EAAE,GAAGD,EAAEC,EAAuZ,SAASC,EAAER,EAAEG,GAAGH,EAAE,GAAGS,KAAKC,IAAIV,EAAE,GAAGG,EAAE,IAAIH,EAAE,GAAGS,KAAKC,IAAIV,EAAE,GAAGG,EAAE,IAAIH,EAAE,GAAGS,KAAKC,IAAIV,EAAE,GAAGG,EAAE,IAAIH,EAAE,GAAGS,KAAKE,IAAIX,EAAE,GAAGG,EAAE,IAAIH,EAAE,GAAGS,KAAKE,IAAIX,EAAE,GAAGG,EAAE,IAAIH,EAAE,GAAGS,KAAKE,IAAIX,EAAE,GAAGG,EAAE,IAAwH,SAASS,EAAEZ,EAAEG,GAAGH,EAAE,GAAGS,KAAKC,IAAIV,EAAE,GAAGG,EAAE,IAAIH,EAAE,GAAGS,KAAKC,IAAIV,EAAE,GAAGG,EAAE,IAAIH,EAAE,GAAGS,KAAKC,IAAIV,EAAE,GAAGG,EAAE,IAAIH,EAAE,GAAGS,KAAKE,IAAIX,EAAE,GAAGG,EAAE,IAAIH,EAAE,GAAGS,KAAKE,IAAIX,EAAE,GAAGG,EAAE,IAAIH,EAAE,GAAGS,KAAKE,IAAIX,EAAE,GAAGG,EAAE,IAAyd,SAASU,EAAEb,EAAEG,EAAEC,GAAG,MAAML,EAAEI,EAAEW,OAAO,IAAIZ,EAAEF,EAAE,GAAGK,EAAEL,EAAE,GAAGM,EAAEN,EAAE,GAAGO,EAAEP,EAAE,GAAGQ,EAAER,EAAE,GAAGe,EAAEf,EAAE,GAAG,GAAGI,EAAE,IAAI,IAAIJ,EAAE,EAAEA,EAAED,EAAEC,IAAI,CAAC,MAAMI,EAAED,EAAEH,GAAGE,EAAEO,KAAKC,IAAIR,EAAEE,EAAE,IAAIC,EAAEI,KAAKC,IAAIL,EAAED,EAAE,IAAIE,EAAEG,KAAKC,IAAIJ,EAAEF,EAAE,IAAIG,EAAEE,KAAKE,IAAIJ,EAAEH,EAAE,IAAII,EAAEC,KAAKE,IAAIH,EAAEJ,EAAE,IAAIW,EAAEN,KAAKE,IAAII,EAAEX,EAAE,SAAS,IAAI,IAAIJ,EAAE,EAAEA,EAAED,EAAEC,IAAI,CAAC,MAAMI,EAAED,EAAEH,GAAGE,EAAEO,KAAKC,IAAIR,EAAEE,EAAE,IAAIC,EAAEI,KAAKC,IAAIL,EAAED,EAAE,IAAIG,EAAEE,KAAKE,IAAIJ,EAAEH,EAAE,IAAII,EAAEC,KAAKE,IAAIH,EAAEJ,EAAE,IAAIJ,EAAE,GAAGE,EAAEF,EAAE,GAAGK,EAAEL,EAAE,GAAGM,EAAEN,EAAE,GAAGO,EAAEP,EAAE,GAAGQ,EAAER,EAAE,GAAGe,EAAyE,SAASC,EAAEhB,GAAG,OAAOA,EAAE,IAAIA,EAAE,GAAG,EAAEA,EAAE,GAAGA,EAAE,GAAG,SAASiB,EAAEjB,GAAG,OAAOA,EAAE,IAAIA,EAAE,GAAG,EAAEA,EAAE,GAAGA,EAAE,GAAG,SAASkB,EAAElB,GAAG,OAAOA,EAAE,IAAIA,EAAE,GAAG,EAAEA,EAAE,GAAGA,EAAE,GAA8J,SAASmB,EAAEnB,EAAEG,EAAE,CAAC,EAAE,EAAE,IAAI,OAAOA,EAAE,GAAGa,EAAEhB,GAAGG,EAAE,GAAGc,EAAEjB,GAAGG,EAAE,GAAGe,EAAElB,GAAGG,EAAi6B,SAASiB,EAAEpB,EAAEG,EAAEC,EAAEJ,GAAG,OAAOI,EAAE,GAAGD,EAAE,GAAGC,EAAE,GAAGD,EAAE,GAAGC,EAAE,GAAGD,EAAE,GAAGC,IAAIJ,IAAII,EAAE,GAAGJ,EAAE,GAAGI,EAAE,GAAGJ,EAAE,GAAGI,EAAE,GAAGJ,EAAE,IAAII,EAAE,SAASiB,EAAErB,EAAEG,EAAEC,EAAEJ,GAAG,OAAOI,EAAE,GAAGD,EAAE,GAAGC,EAAE,GAAGD,EAAE,GAAGC,EAAE,GAAGD,EAAE,GAAGC,IAAIJ,IAAII,EAAE,GAAGJ,EAAE,GAAGI,EAAE,GAAGJ,EAAE,GAAGI,EAAE,GAAGJ,EAAE,IAAIA,EAAE,SAASsB,EAAEtB,EAAEG,GAAG,OAAOH,EAAE,GAAGG,EAAE,GAAGH,EAAE,GAAGG,EAAE,GAAGH,EAAE,GAAGG,EAAE,GAAGH,EAAE,GAAGG,EAAE,GAAGH,EAAE,GAAGG,EAAE,GAAGH,EAAE,GAAGG,EAAE,GAAGH,EAAE,SAASuB,EAAEvB,GAAG,OAAOA,EAAEsB,EAAEtB,EAAEwB,GAAGzB,EAAEyB,GAA+E,SAASC,EAAEzB,EAAEG,GAAG,OAAOH,EAAE,GAAGG,EAAE,GAAGH,EAAE,GAAGG,EAAE,GAAGH,EAAE,GAAG0B,OAAOC,kBAAkB3B,EAAE,GAAGG,EAAE,GAAGH,EAAE,GAAGG,EAAE,GAAGH,EAAE,GAAG0B,OAAOE,kBAAkB5B,EAAE,SAAS6B,EAAE7B,GAAG,OAAO,IAAIA,EAAEc,OAAyD,SAASgB,EAAE3B,EAAEC,EAAEL,GAAG,GAAGC,YAAEG,IAAIH,YAAEI,GAAG,OAAOD,IAAIC,EAAE,IAAIyB,EAAE1B,KAAK0B,EAAEzB,GAAG,OAAM,EAAG,GAAGL,GAAG,IAAI,IAAIC,EAAE,EAAEA,EAAEG,EAAEW,OAAOd,IAAI,IAAID,EAAEI,EAAEH,GAAGI,EAAEJ,IAAI,OAAM,OAAQ,IAAI,IAAIA,EAAE,EAAEA,EAAEG,EAAEW,OAAOd,IAAI,GAAGG,EAAEH,KAAKI,EAAEJ,GAAG,OAAM,EAAG,OAAM,EAAmD,MAAqCwB,EAAE,CAAC,IAAI,IAAI,KAAI,KAAK,KAAK,KAAMvB,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,GAAKF,K,gICA1jI,MAAMI,EAAEG,IAAEyB,UAAU,oDAAoD7B,EAAE,CAAC8B,aAAa,CAAC1B,EAAEF,IAAIE,EAAE2B,MAAM7B,ICAkd,MAAM8B,EAAE5B,IAAEyB,UAAU,2DAA0E,gBAAMI,YAAYhC,GAAGiC,KAAKC,gBAAgB7B,cAAI4B,KAAKE,gBAAgB,IAAIC,IAAIH,KAAKI,aAAarC,EAAE,WAAW,OAAOiC,KAAKK,MAAMC,MAAMvC,GAAG,OAAOiC,KAAKO,aAAaxC,GAAGyC,QAAQ,MAAMzC,EAAEiC,KAAKS,qBAAqB,OAAOT,KAAKU,SAAS,CAACC,KAAK5C,EAAE6C,KAAK,IAAIC,aAAab,KAAKE,gBAAgBY,SAAS,CAAC/C,EAAEG,KAAK8B,KAAKE,gBAAgBa,IAAI7C,EAAE,MAAM8C,YAAYjD,GAAG,IAAI,MAAMG,KAAKH,EAAEiC,KAAKE,gBAAgBa,IAAI7C,EAAE,GAAG+C,QAAQlD,GAAG,MAAMG,EAAE,GAAGP,EAAE,GAAGuD,EAAE,IAAIC,IAAIpD,GAAG,OAAOiC,KAAKE,gBAAgBY,SAAS,CAAC/C,EAAEC,KAAK,MAAMI,KAAK,EAAE4B,KAAKE,gBAAgBkB,IAAIpD,IAAIQ,EAAE0C,EAAEG,IAAIrD,IAAII,GAAGI,EAAEN,EAAEoD,KAAKtD,GAAGI,IAAII,GAAGb,EAAE2D,KAAKtD,GAAGgC,KAAKE,gBAAgBa,IAAI/C,EAAEQ,EAAE,EAAE,MAAM,CAACmC,KAAKzC,EAAE0C,KAAKjD,GAAG4D,cAAc,MAAMC,SAASzD,EAAE0D,WAAWvD,EAAEwD,MAAM/D,EAAEgE,WAAWT,EAAEU,UAAU5D,GAAGgC,KAAK,OAAOxB,IAAEqD,SAAS,CAACL,SAASzD,EAAE0D,WAAWvD,EAAEwD,MAAM/D,EAAEgE,WAAWT,EAAEU,UAAU5D,IAAI,aAAaD,EAAEG,GAAG8B,KAAKK,MAAMyB,KAAKC,UAAUhE,GAAG,MAAMJ,QAAQG,YAAEC,EAAE,KAAKG,SAASgD,YAAE,CAAClB,KAAKgC,mBAAmBrE,GAAGqC,KAAKiC,aAAatE,GAAGqC,KAAKkC,oBAAoBvE,GAAGqC,KAAKmC,eAAexE,KAAK,0BAA0BI,GAAG,IAAIA,IAAIA,EAAE2D,MAAM,OAAO1B,KAAKoC,QAAQ,UAAUpC,KAAK0B,MAAM,MAAM1B,KAAKoC,cDAxkDC,eAAiBnE,EAAEgD,GAAG,MAAMtD,QAAQ,8BAAiD,IAAI,MAAMQ,EAAER,EAAE0E,YAAYC,OAAOrE,EAAEgD,GAAG,IAAI9C,EAAEoE,eAAe,CAAC,MAAMtE,EAAE,IAAIF,IAAE,sBAAsB,qFAAqFI,GAAGL,EAAE0E,MAAMvE,GAAG,OAAOA,IAAI,MAAMF,EAAEE,EAAEwE,oBAAoB,OAAOtE,EAAEuE,YAAY3E,EAAEF,IAAI,MAAME,GAAG,OAAOD,EAAE6E,KAAK,2BAA2B,oDAAoD1E,GAAGA,IAAG,GCA8oCC,CAAEJ,EAAE2D,MAAM1B,KAAKI,aAAayC,aAAa7C,KAAK0B,MAAM3D,EAAE2D,MAAMO,aAAalE,GAAGiC,KAAK8C,WAAW/E,GAAGA,EAAE6D,WAAW,IAAIT,IAAIpD,EAAE6D,WAAW5B,KAAK+C,WAAWhF,GAAGA,EAAEiF,WAAW,IAAI7B,IAAIpD,EAAEiF,WAAWhD,KAAK4B,UAAU7D,GAAGA,EAAE6D,UAAU,yBAAyB7D,GAAG,IAAIA,IAAIA,EAAEyD,SAAS,OAAOxB,KAAKiD,sBAAsB,KAAKjD,KAAKwB,SAAS,UAAUxB,KAAKyB,WAAW,MAAM,MAAMvD,EAAEH,EAAEyD,SAAS7D,EAAEI,EAAE0D,YAAY,2BAA2BP,QAAQtC,YAAEjB,EAAEO,EAAE8B,KAAKI,aAAa8C,aAAalD,KAAKI,aAAa+C,KAAKnD,KAAKI,aAAagD,MAAMpF,YAAEgC,KAAKC,gBAAgB/B,GAAG8B,KAAKiD,sBAAsB/B,EAAElB,KAAKwB,SAAStD,EAAE8B,KAAKyB,WAAW9D,EAAEwE,eAAepE,GAAG,GAAGiC,KAAK2B,WAAW3B,KAAKqD,cAAc,KAAKtF,GAAGA,EAAE4D,WAAW,GAAG3B,KAAKI,aAAakD,SAAStD,KAAK2B,WAAW5D,EAAE4D,WAAW3B,KAAKqD,cAAczF,YAAEoC,KAAKI,aAAakD,SAASvF,EAAE4D,WAAW3C,SAAO,CAAC,MAAMd,EAAE,IAAIP,IAAE,+CAA+C,oEAAoEI,EAAE4D,YAAY7B,EAAE2C,MAAMvE,IAAIqC,aAAaxC,GAAG,OAAOiC,KAAKuD,kBAAkBxF,IAAIiC,KAAKwD,YAAYzF,IAAIiC,KAAKyD,cAAc1F,IAAIiC,KAAK0D,oBAAoB3F,GAAG2F,oBAAoB3F,GAAG,OAAOiC,KAAK0B,OAAO1B,KAAKoC,QAAQrE,GAAGyF,YAAYzF,GAAG,QAAQiC,KAAK+C,aAAa/C,KAAK+C,WAAWY,OAAO3D,KAAK+C,WAAW1B,IAAItD,EAAE6F,mBAAmB5D,KAAK8C,aAAa9C,KAAK8C,WAAWa,MAAM3D,KAAK8C,WAAWzB,IAAItD,EAAE6F,gBAAgBL,kBAAkBxF,GAAG,IAAIiC,KAAKwB,SAAS,OAAM,EAAG,MAAMtD,EAAEH,EAAE8F,uBAAuB,QAAQ3F,GAAG8B,KAAKiD,sBAAsB/E,GAAGuF,cAAcvF,GAAG,OAAOH,YAAEiC,KAAKqD,gBAAgBrD,KAAKqD,cAAcnF,GAAGuC,qBAAqB,MAAM1C,EAAE,GAAG,OAAOiC,KAAKE,gBAAgBY,SAAS,CAAC5C,EAAEP,KAAK,EAAEO,IAAI8B,KAAKE,gBAAgBa,IAAIpD,EAAE,GAAGI,EAAEuD,KAAK3D,OAAOI,K,iCCAt3G,SAASA,EAAEA,EAAEH,GAAG,IAAIG,EAAE,OAAO,KAAK,MAAMG,EAAEN,EAAEkG,gBAAgBC,eAAe9F,EAAE+F,aAAahG,GAAGD,EAAE,IAAIa,EAAEU,OAAOE,kBAAkB7B,EAAE2B,OAAOC,kBAAkB,GAAGtB,GAAGD,EAAEJ,EAAEkD,SAAS/C,IAAI,MAAMH,EAAEM,EAAE0B,aAAa7B,EAAEE,GAAGG,EAAEF,EAAE0B,aAAa7B,EAAEC,GAAG,MAAMJ,GAAGqG,MAAMrG,KAAKgB,EAAEP,KAAKC,IAAIM,EAAEhB,IAAI,MAAMQ,GAAG6F,MAAM7F,KAAKT,EAAEU,KAAKE,IAAIZ,EAAES,WAAW,CAAC,MAAML,EAAEE,GAAGD,EAAEJ,EAAEkD,SAASlD,IAAI,MAAMK,EAAEC,EAAE0B,aAAahC,EAAEG,GAAG,MAAME,GAAGgG,MAAMhG,KAAKW,EAAEP,KAAKC,IAAIM,EAAEX,GAAGN,EAAEU,KAAKE,IAAIZ,EAAEM,OAAO,MAAM,CAACiG,MAAMtF,EAAEuF,IAAIxG,GAAG,SAASC,EAAEG,EAAEH,EAAEM,GAAG,IAAIN,IAAIG,EAAE,OAAO,KAAK,MAAMgG,eAAe9F,EAAE+F,aAAahG,GAAGD,EAAE,IAAIE,IAAID,EAAE,OAAO,KAAK,MAAMkG,MAAMtF,EAAEuF,IAAIxG,GAAGC,EAAE,OAAO,OAAOgB,GAAG,OAAOjB,EAAE,UAAK,IAASiB,QAAG,IAASjB,EAAE,KAAI,EAAGM,GAAGD,EAAE,SAASD,EAAEH,EAAEM,EAAED,EAAED,GAAG,OAAG,MAAMC,GAAG,MAAMD,EAASY,IAAI,MAAMjB,EAAEI,EAAE6B,aAAahB,EAAEhB,GAAGQ,EAAEL,EAAE6B,aAAahB,EAAEV,GAAG,OAAO,MAAMP,GAAGA,GAAGK,KAAK,MAAMI,GAAGA,GAAGH,IAAO,MAAMA,EAASL,IAAI,MAAMI,EAAED,EAAE6B,aAAahC,EAAEM,GAAG,OAAO,MAAMF,GAAGA,GAAGC,GAAM,MAAMD,EAASE,IAAI,MAAMD,EAAEF,EAAE6B,aAAa1B,EAAEN,GAAG,OAAO,MAAMK,GAAGA,GAAGD,QAArE,EAArN,CAAqSE,EAAED,EAAED,EAAEY,EAAEjB,GAAG,SAASI,EAAEH,EAAEM,EAAED,GAAG,OAAG,MAAMC,GAAG,MAAMD,GAAGC,IAAID,EAASA,GAAGF,EAAE6B,aAAa3B,EAAEL,KAAKM,EAAK,MAAMA,GAAG,MAAMD,EAASD,IAAI,MAAMY,EAAEb,EAAE6B,aAAa5B,EAAEJ,GAAG,OAAOgB,GAAGV,GAAGU,GAAGX,GAAM,MAAMC,EAASD,GAAGF,EAAE6B,aAAa3B,EAAEL,IAAIM,EAAK,MAAMD,EAASC,GAAGH,EAAE6B,aAAa1B,EAAEN,IAAIK,OAA1C,EAAzM,CAA6PC,EAAED,GAAGD,EAAEY,EAAEjB,GAJhrC,qE,qdCIA,SAASC,EAAEA,EAAEG,GAAG,OAAOH,EAAEG,EAAE,EAAE,EAAEA,EAAE,EAAE,EAA0N,SAASK,EAAEL,EAAEC,EAAEI,EAAEgG,EAAEnG,GAAG,IAAIF,EAAE,OAAM,EAAG,MAAMY,EAAEf,EAAEI,EAAEI,IAAIiG,OAAOnD,EAAEoD,QAAQ3G,GAAGI,EAAE,IAAIa,GAAE,EAAGI,EAAE,EAAE,IAAI,MAAMpB,KAAKD,EAAEiB,EAAEV,EAAEU,EAAEsC,EAAEvC,EAAEK,EAAEpB,EAAEwG,EAAEnG,GAAGe,GAAGpB,EAAEe,EAAE,OAAOC,EAAE,SAASV,EAAEN,EAAEG,EAAEC,EAAEI,EAAEF,EAAEkG,EAAEnG,GAAG,IAAIU,EAAEf,EAAEsD,EAAE9C,EAAE,IAAI,IAAIR,EAAEQ,EAAET,EAAES,EAAEF,EAAEF,EAAEJ,EAAED,EAAEC,GAAGI,EAAE,CAACkD,EAAEtD,EAAEI,EAAEkD,IAAIvD,IAAIuD,EAAE9C,GAAG,MAAMF,EAAEH,EAAEH,GAAGgB,EAAEb,EAAEH,EAAE,GAAGoB,EAAEjB,EAAEmD,GAAGqD,EAAExG,EAAEmD,EAAE,IAAItC,EAAEX,GAAGsG,GAAGtG,GAAGsG,EAAEtG,GAAGW,GAAGX,IAAIC,GAAGD,EAAEW,IAAI2F,EAAE3F,IAAII,EAAEd,GAAGkG,IAAIzF,GAAGA,GAAG,OAAOA,ECA8wB,MAAM6F,EAAE,IAAIzG,IAAE,CAAC0G,iBAAiB,SAASC,qBAAqB,aAAaC,gBAAgB,OAAOC,uBAAuB,QAAQC,wBAAwB,iBAAiBC,0BAA0B,sBAAsBC,EAAEC,OAAOC,OAAO,IAAInF,EAAE,IAAItB,IAAE0G,EAAE,IAAI1G,IAAEC,EAAE,IAAID,IAAE2G,EAAE,CAACC,kBAAkBC,IAAEC,qBAAqBC,IAAEC,oBAAoBC,IAAEC,uBAAuBC,KAAG,SAASC,EAAE1H,EAAEH,EAAEC,EAAEL,EAAEO,EAAEiF,KAAKjC,EAAEhD,EAAEkF,MAAM,MAAMxF,EAAEM,EAAEiF,MAAMxF,EAAES,EAAEF,EAAEkF,MAAMlC,EAAE,GAAGlD,EAAE,CAAC,MAAMF,EAAEkB,YAAEP,EAAEV,EAAEG,EAAEiF,KAAKjF,EAAEkF,KAAK,oBAAoBpF,EAAEL,EAAEuD,GAAG,OAAOmE,YAAEvH,EAAEF,EAAEQ,GAAG,OAAOiH,YAAEtH,EAAEH,EAAEQ,GAAmL,SAASyH,EAAE3H,EAAEH,EAAEC,EAAEL,EAAEuD,EAAEtD,EAAEQ,EAAEL,EAAED,EAAEE,GAAG,MAAMY,EAAEb,GAAGK,EAAEW,EAAEf,GAAGF,EAAEG,EAAEN,EAAE,WAAWA,EAAEA,EAAEA,EAAE6D,SAAS,KAAK,IAAIvD,EAAE,OAAO,KAAK,GAAGiD,EAAE,CAAC,IAAIvD,EAAEuB,YAAEgG,EAAEjH,EAAEF,EAAEC,EAAEE,EAAEgD,EAAE9C,EAAEN,GAAG,OAAOF,IAAID,EAAEqB,YAAEP,EAAEd,EAAEiB,EAAEG,EAAEb,EAAEN,IAAIuH,EAAEjH,GAAGP,EAAEiB,EAAEG,GAAG,GAAGnB,EAAE,CAAC,MAAMD,EAAEqB,YAAEP,EAAER,EAAEF,EAAEC,EAAEE,EAAEN,EAAEQ,EAAEN,GAAG,OAAOqH,EAAEjH,GAAGP,EAAEiB,EAAEG,GAAG,OAAOM,YAAES,EAAE7B,EAAEF,EAAEC,EAAEI,EAAEN,GAAGqH,EAAEjH,GAAG4B,EAAElB,EAAEG,GAAGsD,eAAeyD,EAAE5H,EAAEH,EAAEC,GAAG,MAAM+H,UAAUpI,EAAEqI,cAAc9E,EAAE+E,2BAA2BrI,EAAEsI,cAAc9H,GAAGF,EAAE,GAAGP,EAAE,IAAI,IAAIO,EAAE,EAAEA,EAAEP,EAAEe,OAAOR,IAAIP,EAAEO,GAAGP,EAAEO,GAAGiI,OAAO,GAAGjF,EAAE,IAAI,IAAIhD,EAAE,EAAEA,EAAEgD,EAAExC,OAAOR,IAAIgD,EAAEhD,GAAGgD,EAAEhD,GAAGiI,OAAO,GAAGvI,EAAE,IAAI,IAAIM,EAAE,EAAEA,EAAEN,EAAEc,OAAOR,IAAIN,EAAEM,GAAGN,EAAEM,GAAGiI,OAAO,GAAG/H,EAAE,IAAI,IAAIF,EAAE,EAAEA,EAAEE,EAAEM,OAAOR,IAAIE,EAAEF,GAAGkI,mBAAmBhI,EAAEF,GAAGkI,iBAAiBhI,EAAEF,GAAGkI,iBAAiBD,QAAQ,OAAOjI,EAAEsD,WAAWtD,EAAEmI,QAAQnI,EAAEmI,MAAMnI,EAAEsD,SAAS8E,kBAAkBC,EAAErI,EAAEH,EAAEC,GAA2CqE,eAAekE,EAAExI,EAAEC,EAAEL,GAAG,IAAII,EAAE,OAAO,KAAK,IAAI2D,MAAM5D,GAAGC,EAAE,GAAGA,EAAE2D,MAAM5D,EAAEA,GAAGA,EAAEqI,SAASrI,GAAG,YAAY0I,KAAK1I,IAAIE,GAAGA,IAAIF,KAAKC,EAAE2D,MAAM,OAAO3D,EAAEyD,SAAS,OAAOzD,EAAE,IAAIa,QAAQyD,eAAenE,GAAG,MAAMsD,SAASzD,EAAE0I,SAASzI,EAAE0I,MAAM/I,GAAGO,EAAE,GAAG,MAAMF,GAAG,qBAAqBD,EAAE,OAAOA,EAAE,MAAMD,EAAEC,EAAEuI,iBAAiB1H,EAAEjB,EAAE6G,EAAE3C,SAASlE,GAAG+B,YAAE5B,GAAGiB,EAAEjB,IAAIoD,YAAEpD,IAAIF,YAAEE,IAAIC,QAAQqB,YAAEtB,EAAEM,KAAGuI,MAAM,IAAIlH,YAAE1B,EAAEK,OAAK,aAA66CwI,IAAID,MAAMzI,GAAGA,EAAE2I,kBAA16C9H,EAAEuH,iBAAiBvH,EAAEf,EAAEY,GAApPyD,CAAwPtE,GAAG,GAAGA,EAAE0I,SAAS,EAAE1I,EAAE2I,MAAM,KAAK,qCAAqC3I,EAAE0D,WAAW,CAAC,MAAM6E,iBAAiBpI,GAAGH,EAAEyD,SAAS5C,EAAEwF,YAAExF,GAAGA,EAAE0H,iBAAiBpI,EAAEH,EAAEyD,SAAS5C,QAAQQ,YAAER,EAAE0H,iBAAiB3I,GAAG,MAAMoB,SAASwF,YAAEpG,YAAES,KAAK,GAAG,GAAGV,YAAEa,GAAG,MAAMgG,EAAE,MAAM9G,EAAEc,EAAE+H,SAASnI,QAAQc,YAAExB,EAAEA,EAAEqI,iBAAiB3I,GAAG,IAAIgB,EAAE,MAAMoG,EAAE,OAAOpG,EAAE2H,iBAAiB3I,EAAEI,EAAEyD,SAAS7C,EAAEZ,EAAE,SAASgJ,EAAE7I,GAAG,OAAOA,GAAGiB,KAAKjB,EAAE4D,KAAKkF,MAAMlF,KAAKC,UAAU7D,EAAE+I,IAAI/I,EAAE,MAAMiB,EAAE,aAAa8H,EAAE,CAAC/I,EAAEH,IAAIG,IAAIiB,EAAEpB,OAAE,EAAOmJ,EAAE,CAACC,yBAAyB,aAAaC,uBAAuB,WAAWC,sBAAsB,UAAUC,uBAAuB,WAAWC,iCAAiC,aAAaC,8BAA8B,KAAKC,uBAAuB,WAAWC,sBAAsB,UAAUC,qBAAqB,SAASC,uBAAuB,MAAMC,EAAE,CAACV,0BAAyB,EAAGC,wBAAuB,EAAGO,sBAAqB,EAAGN,uBAAsB,EAAGC,wBAAuB,EAAGI,uBAAsB,EAAGD,wBAAuB,EAAGF,kCAAiC,EAAGC,+BAA8B,EAAGI,wBAAuB,GAAIE,EAAE,CAAC1C,mBAAkB,EAAGM,wBAAuB,EAAGJ,sBAAqB,EAAGE,qBAAoB,EAAGuC,sBAAqB,GAAIC,EAAE,CAAC5C,mBAAkB,EAAGM,wBAAuB,EAAGJ,sBAAqB,EAAGE,qBAAoB,EAAGuC,sBAAqB,GAAI,SAASnB,IAAI,OAAO,qDAAgG,SAASqB,EAAE/J,EAAEH,EAAEC,EAAEkD,EAAEtD,GAAG,GAAGe,YAAEZ,IAAI,sBAAsBC,IAAI,6BAA6BE,GAAG,2BAA2BA,GAAG,CAAC,MAAMA,EAAEW,YAAE,IAAIL,IAAET,GAAE,GAAG,GAAI,OAAOJ,aAAGI,GDA7pJ,SAAWH,EAAEG,EAAEC,EAAEE,GAAG,OAAOE,EAAER,EAAEG,EAAEC,EAAEE,EAAEmG,OAAO,GAAGnG,EAAEmG,OAAO,ICAwmJpF,CAAEf,GAAE,GAAG,EAAGH,KAAK,GAAGY,YAAEZ,IAAI,2BAA2BC,EAAE,CAAC,MAAMA,EAAEa,YAAE,IAAIL,IAAET,GAAE,GAAG,GAAI,GAAG,2BAA2BG,EAAE,OAAOP,aAAGO,GDA7tJ,SAAWH,EAAEC,EAAEE,EAAEkG,EAAEnG,EAAEU,GAAG,MAAMuC,EAAEtD,EAAEK,EAAEU,IAAI0F,OAAO1G,EAAE2G,QAAQ1F,GAAGwF,EAAE,IAAIxF,EAAE,OAAM,EAAG,IAAI,IAAIhB,EAAE,EAAEwG,EAAE,EAAExG,EAAEgB,EAAEF,OAAOd,IAAIwG,GAAGlD,EAAE,IAAI9C,EAAEL,EAAEC,EAAEE,EAAEP,EAAEyG,GAAGzG,EAAEyG,EAAE,IAAI,OAAM,EAAG,OAAM,ECAukJ8D,CAAElK,GAAE,GAAG,EAAGE,EAAEgD,EAAEtD,KAAK,GAAGkB,YAAEf,IAAI,sBAAsBC,IAAI,6BAA6BE,GAAG,2BAA2BA,GAAG,OAAOP,aAAGO,GAAGU,YAAEb,EAAE8H,EAAE7H,EAAEkD,EAAEtD,EAAEM,MAAM,GAAGY,YAAEf,IAAI,2BAA2BC,GAAG,2BAA2BE,EAAE,OAAOP,aAAGO,GAAGa,YAAEhB,EAAE8H,EAAE7H,EAAEkD,EAAEtD,EAAEM,MAAM,GAAGY,YAAEf,IAAI,6BAA6BG,EAAE,CAAC,MAAMA,EAAED,YAAED,GAAG,OAAOL,aAAGA,GAAGO,EAAEH,EAAE8H,EAAE7H,EAAEkD,EAAEtD,EAAED,MAAM,OAAOiJ,IAAID,MAAMhJ,IAAI,MAAMS,EAAET,EAAEuJ,EAAEhJ,IAAIiK,KAAK,KAAKpK,EAAEuI,iBAAiBvI,GAAG,OAAOG,GAAGE,EAAEyH,EAAE7H,EAAEkD,EAAEtD,EAAEM,OAAOmE,eAAe+F,EAAGlK,EAAEH,EAAEJ,GAAG,MAAM8D,WAAWP,EAAEM,SAAS5D,GAAGM,EAAE,GAAGN,EAAE,CAAC,IAAG,IAAKiK,EAAE3G,GAAG,MAAM,IAAIlD,IAAE,kCAAkC,yCAAyC,CAACqK,MAAMnK,IAAI,GAAGJ,YAAEF,EAAE0I,mBAAmBxI,YAAEH,GAAG,CAAC,IAAI,SAASO,GAAG,OAAM,IAAK4J,EAAEQ,YAAEpK,IAA3B,CAAgCN,GAAG,MAAM,IAAII,IAAE,kCAAkC,kCAAkC,CAACqK,MAAMnK,IAAI,IAAI,SAASA,GAAG,OAAM,IAAK8J,EAAE9J,GAAzB,CAA6BH,GAAG,MAAM,IAAIC,IAAE,kCAAkC,kCAAkC,CAACqK,MAAMnK,IAAI,GAAGA,EAAEmI,MAAM,OAAOjH,YAAElB,EAAEsD,UAAUtD,EAAEsD,SAAS8E,iBAAiBpI,EAAEmI,SAAS,SAASkC,EAAGrK,GAAG,GAAGY,YAAEZ,GAAG,OAAM,EAAG,GAAGS,YAAET,GAAG,CAAC,IAAI,MAAMH,KAAKG,EAAEsK,MAAM,CAAC,GAAG,IAAIzK,EAAEW,OAAO,OAAM,EAAG,GAAGX,EAAE,GAAG,KAAKA,EAAE,GAAG,IAAIA,EAAE,GAAG,KAAKA,EAAE,GAAG,IAAIA,EAAE,GAAG,KAAKA,EAAE,GAAG,IAAIA,EAAE,GAAG,KAAKA,EAAE,GAAG,IAAIA,EAAE,GAAG,KAAKA,EAAE,GAAG,IAAIA,EAAE,GAAG,KAAKA,EAAE,GAAG,GAAG,OAAM,EAAG,OAAM,EAAG,OAAM,I,sHCA7sLC,MAArP,SAAWA,EAAEF,EAAEC,GAAGC,EAAEyK,qBAAqB,MAAM7K,EAAEE,EAAE4E,oBAAoB,IAAI,OAAO1E,EAAE0K,SAAS,IAAI3K,EAAE4K,SAAS/K,IAAI,MAAMI,GAAG,OAAOE,IAAEyB,UAAU,wCAAwCiD,KAAK,oCAAoC5E,GAAG,OCAqG,MAAMoG,EAAE,gCAAyD,MAAMxG,EAAEmC,YAAY7B,EAAEgD,GAAGlB,KAAK4I,0BAAyB,EAAG5I,KAAK6I,YAAY3K,EAAE8B,KAAK8I,SAAS,CAACC,SAAS7H,EAAE8H,UAAU9H,EAAE+H,iBAAiB,mBAAmBjL,EAAEI,GAAG,MAAMgG,EAAEzG,YAAEqC,KAAKkJ,QAAQ9K,GAAG,GAAG4B,KAAKkJ,QAAQ9K,GAAGA,GAAG8C,YAAEkD,KAAKtG,YAAEsG,EAAE,cAAc,OAAOlG,YAAE,yBAAyBiL,QAAQC,MAAM,2BAA2BhF,GAAGpE,KAAK8I,SAASC,SAASvI,QAAQxC,EAAEqL,QAAQjL,EAAEkL,OAAM,EAAG,MAAM1L,EAAEQ,EAAEmL,WAAWxK,EAAE,GAAGd,EAAE,GAAG,IAAI,MAAMC,KAAKN,EAAE,CAAC,MAAMsD,EAAEtD,EAAEM,GAAG,OAAOgD,EAAEsI,MAAM,IAAI,QAAQ,MAAM,IAAI,aAAazK,EAAEuC,KAAKtB,KAAKyJ,2BAA2BvI,IAAI,MAAM,IAAI,mBAAmBnC,EAAEuC,KAAKtB,KAAK0J,gCAAgCxI,IAAI,MAAM,IAAI,YAAYjD,EAAEqD,KAAKJ,IAAIlB,KAAK2J,sBAAsB5L,YAAEgB,GAAGiB,KAAK4I,0BAA0B5I,KAAK2J,gBAAgBC,MAAM1L,GAAG,eAAeA,EAAEsL,MAAMtL,EAAE2L,WAAWC,oBAAoB9J,KAAK+J,iBAAiB9L,EAAE+L,sBAAsB9L,EAAEgD,EAAEnD,EAAEC,GAAG,MAAML,EAAEqC,KAAK8I,SAASC,SAAS,IAAI/I,KAAK4I,2BAA2BjL,EAAE0D,IAAItD,GAAG,CAACJ,EAAEoD,IAAIhD,GAAG,IAAI,MAAMJ,KAAKqC,KAAK2J,gBAAgB,CAAC,MAAM7L,EAAEkC,KAAKiK,eAAe/I,EAAEvD,EAAEK,GAAG,OAAOL,EAAEuM,YAAY,IAAI,UAAUhM,EAAEiM,0BAA0BpM,EAAEJ,EAAEyM,WAAWtM,GAAG,MAAM,IAAI,SAASI,EAAEmM,yBAAyBtM,EAAEJ,EAAEyM,WAAWtM,MAAM,iCAAiCI,GAAG,MAAMgD,EAAElB,KAAK6I,YAAYvC,iBAAiBvI,EAAEiC,KAAK6I,YAAYhG,YAAY,MAAM,IAAI3E,EAAE2L,iBAAiB7L,YAAEE,EAAEoM,gBAAgBpJ,EAAEnD,IAAI,sCAAsCG,GAAG,MAAMgD,EAAElB,KAAK6I,YAAYvC,iBAAiBvI,EAAEiC,KAAK6I,YAAY0B,QAAQC,oBAAoBxM,SAASoG,EAAEzG,QAAQK,EAAEE,EAAEuM,MAAM1M,EAAEmD,GAAG,MAAM,IAAIhD,EAAEwM,QAAQ/M,GAAGsM,eAAe/L,EAAEgD,EAAEnD,GAAG,OAAOmD,EAAEsI,MAAM,IAAI,mBAAmB,CAAC,MAAMzL,EAAEG,EAAEwE,oBAAoB,OAAOxB,EAAEwJ,QAAQhC,SAAS3K,IAAI,GAAG,IAAI,aAAa,CAAC,MAAM8L,WAAW7L,GAAGkD,EAAE,OAAO9C,EAAEJ,EAAEE,EAAE,CAACyM,MAAM,CAACC,MAAM7M,U,iCCJzjE,kHAIqQ,SAASK,EAAEL,GAAG,OAAO,WAAWA,KAAK,GAAG,SAASJ,EAAEI,GAAG,OAAO,MAAMA,EAAE,MAAMiB,EAAE,CAAC4E,YAAY7F,GAAGA,EAAE6F,cAAciH,cAAc9M,GAAGA,EAAE+M,iBAAiBlL,aAAa,CAAC7B,EAAEG,IAAIH,EAAEgN,cAAc7M,GAAG8M,kBAAkB,CAACjN,EAAEG,IAAIH,EAAEkN,YAAYlN,GAAGA,EAAE8F,uBAAuBqH,YAAY,CAACnN,EAAEG,IAAIH,EAAEoN,gBAAgB,MAAM3M,UAAUZ,IAAEmC,YAAYhC,EAAEG,GAAGkN,MAAMrN,EAAEG,GAAG8B,KAAK8D,eAAe9E,EAAEgB,KAAKqL,OAAO,IAAInK,IAAElB,KAAKsL,uBAAuB,IAAInL,IAAIH,KAAKuL,qBAAqB,IAAIpL,IAAIH,KAAKwL,sBAAqB,EAAGxL,KAAKyL,OAAOzN,YAAE,GAAGD,IAAC,CAAI2N,KAAK1L,KAAK2L,SAASC,QAAQ7N,GAAG8N,KAAK7L,KAAK2L,SAASG,QAAQ/N,GAAGgO,KAAK/L,KAAK2L,SAASK,QAAQjO,GAAGkO,KAAKjM,KAAK2L,SAASO,QAAQnO,OAAO,sBAAsB,MAAM,CAACoO,aAAa,EAAEC,YAAY,GAAGC,WAAWnO,EAAEgD,EAAEpD,GAAG,GAAGC,YAAEmD,EAAEoL,aAAa,OAAOpL,EAAElB,KAAKsL,uBAAuBvK,IAAIG,EAAEoL,YAAYC,SAASrL,EAAEoL,aAAatM,KAAK2L,SAAS7N,EAAEoD,EAAEoL,YAAYX,SAAS7N,EAAE,MAAME,EAAEkD,EAAEoL,YAAYE,YAAY,KAAKxO,EAAEyO,QAAQ,CAAC,MAAM1O,EAAEC,EAAE4F,cAAc1C,EAAKlD,EAAEuO,UAA2B,GAAhBvO,EAAE0O,WAAoB,IAAI/O,EAAEqC,KAAKuL,qBAAqBnK,IAAIrD,GAAGJ,IAAIA,EAAEG,EAAE6O,kBAAkB3M,KAAKuL,qBAAqBxK,IAAIhD,EAAEJ,GAAGqC,KAAKwL,sBAAqB,GAAIxN,EAAE4O,aAAajP,GAAGG,EAAE+O,cAAclP,EAAEuD,GAAGlB,KAAKgK,sBAAsBlM,EAAEE,EAAEL,EAAEO,EAAE0M,OAAe,MAAM,WAAW1J,EAAEsI,OAAOxJ,KAAKwL,sBAAqB,GAAIxL,KAAKqL,OAAOyB,KAAK,WAAW5L,EAAEJ,QAAQ/C,GAAGiC,KAAKuL,qBAAqBzK,SAAS5C,IAAI,MAAMgD,EAAElB,KAAK2L,SAASoB,cAAc7O,GAAGJ,EAAEkC,KAAKgN,eAAe9L,GAAGnD,EAAED,MAAMmP,cAAclP,GAAGiC,KAAKuL,qBAAqBzK,SAAS5C,IAAI,MAAMgD,EAAElB,KAAK2L,SAASoB,cAAc7O,GAAGJ,EAAEM,EAAE8C,GAAGlD,EAAEL,EAAEuD,GAAGtD,EAAEoC,KAAKkN,eAAepP,GAAGF,EAAEuP,SAASnP,GAAGD,EAAEH,MAAMwP,gBAAgBrP,EAAEmD,GAAG,MAAMpD,EAAEkC,KAAKqN,aAAatP,GAAG,IAAI,MAAMA,KAAKD,EAAE,CAAC,MAAMA,EAAEkC,KAAKsN,yBAAyBvP,EAAEiC,KAAK2L,UAAUzK,EAAEhD,YAAEJ,KAAKyP,cAAcxP,EAAEG,EAAEgD,GAAGlB,KAAKwN,gBAAgB,MAAMxP,EAAE,CAAC,EAAE,EAAE,EAAE,GAAG,IAAI,MAAMJ,KAAKG,EAAE,CAAC,IAAIH,EAAE6P,eAAe,SAAS,MAAM1P,EAAEH,EAAE8P,eAAe1P,EAAE,GAAGgC,KAAK2L,SAASC,QAAQ7N,GAAGC,EAAE,GAAGgC,KAAK2L,SAASG,QAAQ/N,GAAGC,EAAE,GAAGgC,KAAK2L,SAASK,QAAQjO,GAAGC,EAAE,GAAGgC,KAAK2L,SAASO,QAAQnO,GAAGG,EAAEJ,YAAEoD,EAAElD,KAAK2P,cAAc5P,EAAEG,GAAG8B,KAAKuL,qBAAqBzK,SAAS,CAACI,EAAEpD,KAAKC,EAAEsD,IAAIH,KAAKhD,EAAE0P,iBAAiB1M,GAAGlB,KAAKuL,qBAAqBsC,OAAO/P,OAAOkC,KAAKqL,OAAOyB,KAAK,WAAWgB,iBAAiB/P,GAAGiC,KAAKsL,uBAAuBxK,SAAS,CAAC5C,EAAEgD,KAAKnD,EAAEsD,IAAIH,IAAIlB,KAAKsL,uBAAuBuC,OAAO3M,MAAM6M,eAAe7P,EAAEgD,GAAG,MAAMpD,EAAEkC,KAAKsN,yBAAyBpP,EAAEgD,GAAG,OAAOnD,YAAED,GAAG,KAAKA,EAAE8F,cAAcoK,gBAAgBjQ,GAAG,OAAOiC,KAAKuL,qBAAqBnK,IAAIrD,GAAGuP,yBAAyBvP,EAAEG,GAAG,MAAMgD,EAAEhD,EAAE6O,cAAchP,GAAG,OAAOiC,KAAKgN,eAAe9L,GAAG+M,wBAAwBlQ,GAAG,MAAMG,EAAE8B,KAAK2L,SAASoB,cAAchP,GAAGmD,EAAE9C,EAAEF,GAAGJ,EAAEH,EAAEO,GAAGF,EAAEgC,KAAKkN,eAAehM,GAAG,OAAOlD,GAAGA,EAAEmP,SAASrP,GAAGE,GAAG,KAAKkQ,YAAYnQ,GAAG,OAAOiC,KAAKsL,uBAAuBjK,IAAItD,GAAGyP,gBAAgB,IAAIxN,KAAKwL,qBAAqB,OAAOxL,KAAKyL,OAAOjL,QAAQ,MAAMzC,EAAE,GAAGiC,KAAKuL,qBAAqBzK,SAAS5C,IAAI,MAAMgD,EAAElB,KAAK2L,SAASoB,cAAc7O,GAAG8B,KAAK2L,SAASwC,UAAUjQ,EAAE8B,KAAKgN,eAAe9L,KAAKnD,EAAEuD,KAAKpD,MAAM8B,KAAKyL,OAAO2C,KAAKrQ,GAAGiC,KAAKwL,sBAAqB,EAAGwB,eAAejP,GAAG,MAAMG,EAAEE,EAAEL,GAAGmD,EAAEvD,EAAEI,GAAGD,EAAEkC,KAAKkN,eAAehP,GAAG,IAAIJ,EAAE,OAAO,KAAK,MAAME,EAAEF,EAAE0O,YAAY,OAAOxO,EAAEmP,SAASjM,GAAGlD,EAAEkP,eAAenP,GAAG,OAAOiC,KAAKsL,uBAAuBlK,IAAIrD,GAAGsP,aAAatP,GAAGiC,KAAKwN,gBAAgB,MAAMtP,EAAE,CAACwN,KAAK3N,EAAE,GAAG8N,KAAK9N,EAAE,GAAGgO,KAAKhO,EAAE,GAAGkO,KAAKlO,EAAE,IAAI,OAAOiC,KAAKyL,OAAO4C,OAAOnQ","file":"static/js/57.4a6f7967.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isNone as n}from\"../../core/maybe.js\";import t from\"../Extent.js\";import{create as r}from\"./aaBoundingRect.js\";function i(n=D){return[n[0],n[1],n[2],n[3],n[4],n[5]]}function a(n,t,r,a,u,e,m=i()){return m[0]=n,m[1]=t,m[2]=r,m[3]=a,m[4]=u,m[5]=e,m}function u(n,t=i()){return t[0]=n.xmin,t[1]=n.ymin,t[2]=n.zmin,t[3]=n.xmax,t[4]=n.ymax,t[5]=n.zmax,t}function e(n,r){const i=isFinite(n[2])||isFinite(n[5]);return new t(i?{xmin:n[0],xmax:n[3],ymin:n[1],ymax:n[4],zmin:n[2],zmax:n[5],spatialReference:r}:{xmin:n[0],xmax:n[3],ymin:n[1],ymax:n[4],spatialReference:r})}function m(n,t,r=i()){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=t[0],r[4]=t[1],r[5]=t[2],r}function o(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[2]=Math.min(n[2],t[2]),n[3]=Math.max(n[3],t[3]),n[4]=Math.max(n[4],t[4]),n[5]=Math.max(n[5],t[5])}function f(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[3]=Math.max(n[3],t[2]),n[4]=Math.max(n[4],t[3])}function h(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[2]=Math.min(n[2],t[2]),n[3]=Math.max(n[3],t[0]),n[4]=Math.max(n[4],t[1]),n[5]=Math.max(n[5],t[2])}function c(n,t,r=0,i=t.length/3){let a=n[0],u=n[1],e=n[2],m=n[3],o=n[4],f=n[5];for(let n=0;n<i;n++)a=Math.min(a,t[r+3*n]),u=Math.min(u,t[r+3*n+1]),e=Math.min(e,t[r+3*n+2]),m=Math.max(m,t[r+3*n]),o=Math.max(o,t[r+3*n+1]),f=Math.max(f,t[r+3*n+2]);n[0]=a,n[1]=u,n[2]=e,n[3]=m,n[4]=o,n[5]=f}function M(n,t,r,i){n[0]=Math.min(n[0],n[0]+t),n[3]=Math.max(n[3],n[3]+t),n[1]=Math.min(n[1],n[1]+r),n[4]=Math.max(n[4],n[4]+r),n[2]=Math.min(n[2],n[2]+i),n[5]=Math.max(n[5],n[5]+i)}function x(n,t,r){const i=t.length;let a=n[0],u=n[1],e=n[2],m=n[3],o=n[4],f=n[5];if(r)for(let n=0;n<i;n++){const r=t[n];a=Math.min(a,r[0]),u=Math.min(u,r[1]),e=Math.min(e,r[2]),m=Math.max(m,r[0]),o=Math.max(o,r[1]),f=Math.max(f,r[2])}else for(let n=0;n<i;n++){const r=t[n];a=Math.min(a,r[0]),u=Math.min(u,r[1]),m=Math.max(m,r[0]),o=Math.max(o,r[1])}n[0]=a,n[1]=u,n[2]=e,n[3]=m,n[4]=o,n[5]=f}function s(n){for(let t=0;t<6;t++)if(!isFinite(n[t]))return!1;return!0}function l(n){return n[0]>=n[3]?0:n[3]-n[0]}function I(n){return n[1]>=n[4]?0:n[4]-n[1]}function y(n){return n[2]>=n[5]?0:n[5]-n[2]}function N(n){const t=l(n),r=y(n),i=I(n);return Math.sqrt(t*t+r*r+i*i)}function g(n,t=[0,0,0]){return t[0]=n[0]+l(n)/2,t[1]=n[1]+I(n)/2,t[2]=n[2]+y(n)/2,t}function p(n,t=[0,0,0]){return t[0]=l(n),t[1]=I(n),t[2]=y(n),t}function F(n){return Math.max(l(n),y(n),I(n))}function z(n,t){return t[0]>=n[0]&&t[1]>=n[1]&&t[2]>=n[2]&&t[0]<=n[3]&&t[1]<=n[4]&&t[2]<=n[5]}function E(n,t,r){return t[0]>=n[0]-r&&t[1]>=n[1]-r&&t[2]>=n[2]-r&&t[0]<=n[3]+r&&t[1]<=n[4]+r&&t[2]<=n[5]+r}function T(n,t){return t[0]>=n[0]&&t[1]>=n[1]&&t[2]>=n[2]&&t[3]<=n[3]&&t[4]<=n[4]&&t[5]<=n[5]}function b(n,t){return Math.max(t[0],n[0])<=Math.min(t[3],n[3])&&Math.max(t[1],n[1])<=Math.min(t[4],n[4])&&Math.max(t[2],n[2])<=Math.min(t[5],n[5])}function j(t,r){return!!n(r)||b(t,r)}function R(n,t,r,i,a=n){return a[0]=n[0]+t,a[1]=n[1]+r,a[2]=n[2]+i,a[3]=n[3]+t,a[4]=n[4]+r,a[5]=n[5]+i,a}function V(n,t,r=n){const i=n[0]+l(n)/2,a=n[1]+I(n)/2,u=n[2]+y(n)/2;return r[0]=i+(n[0]-i)*t,r[1]=a+(n[1]-a)*t,r[2]=u+(n[2]-u)*t,r[3]=i+(n[3]-i)*t,r[4]=a+(n[4]-a)*t,r[5]=u+(n[5]-u)*t,r}function Y(n,t){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function _(n,t){return t[0]=n[3],t[1]=n[4],t[2]=n[5],t}function d(n,t,r=n){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==n&&(r[3]=n[3],r[4]=n[4],r[5]=n[5]),r}function q(n,t,r=n){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==n&&(r[0]=n[0],r[1]=n[1],r[2]=n[2]),n}function w(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function A(n){return n?w(n,C):i(C)}function B(n,t){return t||(t=r()),t[0]=n[0],t[1]=n[1],t[2]=n[3],t[3]=n[4],t}function G(n,t){return n[0]=t[0],n[1]=t[1],n[2]=Number.NEGATIVE_INFINITY,n[3]=t[2],n[4]=t[3],n[5]=Number.POSITIVE_INFINITY,n}function O(n){return 6===n.length}function P(n){return 0===l(n)&&0===I(n)&&0===y(n)}function S(t,r,i){if(n(t)||n(r))return t===r;if(!O(t)||!O(r))return!1;if(i){for(let n=0;n<t.length;n++)if(!i(t[n],r[n]))return!1}else for(let n=0;n<t.length;n++)if(t[n]!==r[n])return!1;return!0}function k(n,t,r,i,u,e){return a(n,t,r,i,u,e,H)}const v=[-1/0,-1/0,-1/0,1/0,1/0,1/0],C=[1/0,1/0,1/0,-1/0,-1/0,-1/0],D=[0,0,0,0,0,0],H=i();export{C as NEGATIVE_INFINITY,v as POSITIVE_INFINITY,D as ZERO,s as allFinite,g as center,T as contains,z as containsPoint,E as containsPointWithMargin,i as create,I as depth,N as diameter,A as empty,S as equals,o as expandWithAABB,c as expandWithBuffer,x as expandWithNestedArray,M as expandWithOffset,f as expandWithRect,h as expandWithVec3,u as fromExtent,m as fromMinMax,G as fromRect,a as fromValues,_ as getMax,Y as getMin,y as height,b as intersects,j as intersectsClippingArea,O as is,P as isPoint,F as maximumDimension,R as offset,V as scale,w as set,q as setMax,d as setMin,p as size,e as toExtent,B as toRect,l as width,k as wrap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Logger.js\";import r from\"../../../../../core/Error.js\";const t=e.getLogger(\"esri.views.2d.layers.features.support.whereUtils\"),a={getAttribute:(e,r)=>e.field(r)};async function s(e,s){const n=await import(\"../../../../../core/sql/WhereClause.js\");try{const o=n.WhereClause.create(e,s);if(!o.isStandardized){const e=new r(\"mapview - bad input\",\"Unable to apply filter's definition expression, as expression is not standardized.\",o);t.error(e)}return e=>{const r=e.readArcadeFeature();return o.testFeature(r,a)}}catch(r){return t.warn(\"mapview-bad-where-clause\",\"Encountered an error when evaluating where clause\",e),e=>!0}}export{s as createWhereClause};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../core/maybe.js\";import e from\"../../../core/Logger.js\";import i from\"../../../core/Error.js\";import{all as s}from\"../../../core/promiseUtils.js\";import{getBoundsXY as r}from\"../../../geometry/support/boundsUtils.js\";import{create as o}from\"../../../geometry/support/aaBoundingRect.js\";import h from\"../../../tasks/support/Query.js\";import{n as a,g as l}from\"../../../chunks/spatialQuerySupport.js\";import{getTimeOperator as n}from\"./timeSupport.js\";import{featureAdapter as d}from\"../../../views/2d/layers/features/FeatureStore2D.js\";import{createWhereClause as m}from\"../../../views/2d/layers/features/support/whereUtils.js\";const _=e.getLogger(\"esri.views.2d.layers.features.controllers.FeatureFilter\");export default class{constructor(t){this._geometryBounds=o(),this._idToVisibility=new Map,this._serviceInfo=t}get hash(){return this._hash}check(t){return this._applyFilter(t)}clear(){const t=this._resetAllHiddenIds();return this.update(),{show:t,hide:[]}}invalidate(){this._idToVisibility.forEach(((t,e)=>{this._idToVisibility.set(e,0)}))}setKnownIds(t){for(const e of t)this._idToVisibility.set(e,1)}setTrue(t){const e=[],i=[],s=new Set(t);return this._idToVisibility.forEach(((t,r)=>{const o=!!(1&this._idToVisibility.get(r)),h=s.has(r);!o&&h?e.push(r):o&&!h&&i.push(r),this._idToVisibility.set(r,h?3:0)})),{show:e,hide:i}}createQuery(){const{geometry:t,spatialRel:e,where:i,timeExtent:s,objectIds:r}=this;return h.fromJSON({geometry:t,spatialRel:e,where:i,timeExtent:s,objectIds:r})}async update(t,e){this._hash=JSON.stringify(t);const i=await a(t,null,e);await s([this._setGeometryFilter(i),this._setIdFilter(i),this._setAttributeFilter(i),this._setTimeFilter(i)])}async _setAttributeFilter(t){if(!t||!t.where)return this._clause=null,void(this.where=null);this._clause=await m(t.where,this._serviceInfo.fieldsIndex),this.where=t.where}_setIdFilter(t){this._idsToShow=t&&t.objectIds&&new Set(t.objectIds),this._idsToHide=t&&t.hiddenIds&&new Set(t.hiddenIds),this.objectIds=t&&t.objectIds}async _setGeometryFilter(t){if(!t||!t.geometry)return this._spatialQueryOperator=null,this.geometry=null,void(this.spatialRel=null);const e=t.geometry,i=t.spatialRel||\"esriSpatialRelIntersects\",s=await l(i,e,this._serviceInfo.geometryType,this._serviceInfo.hasZ,this._serviceInfo.hasM);r(this._geometryBounds,e),this._spatialQueryOperator=s,this.geometry=e,this.spatialRel=i}_setTimeFilter(t){if(this.timeExtent=this._timeOperator=null,t&&t.timeExtent)if(this._serviceInfo.timeInfo)this.timeExtent=t.timeExtent,this._timeOperator=n(this._serviceInfo.timeInfo,t.timeExtent,d);else{const e=new i(\"feature-layer-view:time-filter-not-available\",\"Unable to apply time filter, as layer doesn't have time metadata.\",t.timeExtent);_.error(e)}}_applyFilter(t){return this._filterByGeometry(t)&&this._filterById(t)&&this._filterByTime(t)&&this._filterByExpression(t)}_filterByExpression(t){return!this.where||this._clause(t)}_filterById(t){return(!this._idsToHide||!this._idsToHide.size||!this._idsToHide.has(t.getObjectId()))&&(!this._idsToShow||!this._idsToShow.size||this._idsToShow.has(t.getObjectId()))}_filterByGeometry(t){if(!this.geometry)return!0;const e=t.readHydratedGeometry();return!!e&&this._spatialQueryOperator(e)}_filterByTime(e){return!t(this._timeOperator)||this._timeOperator(e)}_resetAllHiddenIds(){const t=[];return this._idToVisibility.forEach(((e,i)=>{1&e||(this._idToVisibility.set(i,1),t.push(i))})),t}}\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction t(t,n){if(!t)return null;const e=n.featureAdapter,{startTimeField:u,endTimeField:r}=t;let l=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;if(u&&r)n.forEach((t=>{const n=e.getAttribute(t,u),o=e.getAttribute(t,r);null==n||isNaN(n)||(l=Math.min(l,n)),null==o||isNaN(o)||(i=Math.max(i,o))}));else{const t=u||r;n.forEach((n=>{const u=e.getAttribute(n,t);null==u||isNaN(u)||(l=Math.min(l,u),i=Math.max(i,u))}))}return{start:l,end:i}}function n(t,n,e){if(!n||!t)return null;const{startTimeField:u,endTimeField:r}=t;if(!u&&!r)return null;const{start:l,end:i}=n;return null===l&&null===i?null:void 0===l&&void 0===i?()=>!1:u&&r?function(t,n,e,u,r){if(null!=u&&null!=r)return l=>{const i=t.getAttribute(l,n),o=t.getAttribute(l,e);return(null==i||i<=r)&&(null==o||o>=u)};if(null!=u)return n=>{const r=t.getAttribute(n,e);return null==r||r>=u};if(null!=r)return e=>{const u=t.getAttribute(e,n);return null==u||u<=r};return}(e,u,r,l,i):function(t,n,e,u){if(null!=e&&null!=u&&e===u)return u=>t.getAttribute(u,n)===e;if(null!=e&&null!=u)return r=>{const l=t.getAttribute(r,n);return l>=e&&l<=u};if(null!=e)return u=>t.getAttribute(u,n)>=e;if(null!=u)return e=>t.getAttribute(e,n)<=u;return}(e,u||r,l,i)}export{t as getTimeExtent,n as getTimeOperator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction n(n,t){return n?t?4:3:t?3:2}function t(n,t,r,e){return o(n,t,r,e.coords[0],e.coords[1])}function r(t,r,e,c,u,f){const s=n(u,f),{coords:i,lengths:l}=c;if(!l)return!1;for(let n=0,c=0;n<l.length;n++,c+=s)if(!o(t,r,e,i[c],i[c+1]))return!1;return!0}function o(t,r,o,c,u){if(!t)return!1;const f=n(r,o),{coords:s,lengths:i}=t;let l=!1,d=0;for(const n of i)l=e(l,s,f,d,n,c,u),d+=n*f;return l}function e(n,t,r,o,e,c,u){let f=n,s=o;for(let n=o,i=o+e*r;n<i;n+=r){s=n+r,s===i&&(s=o);const e=t[n],l=t[n+1],d=t[s],g=t[s+1];(l<u&&g>=u||g<u&&l>=u)&&e+(u-l)/(g-l)*(d-e)<c&&(f=!f)}return f}export{o as polygonContainsCoords,r as polygonContainsMultipoint,t as polygonContainsPoint};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../core/maybe.js\";import{JSONMap as t}from\"../core/jsonMap.js\";import r from\"../core/Error.js\";import{resolve as i}from\"../core/promiseUtils.js\";import{isGeographic as s,isWebMercator as n,WGS84 as o,isValid as a}from\"../geometry/support/spatialReferenceUtils.js\";import{extentContainsPoint as l,extentContainsMultipoint as p}from\"../geometry/support/contains.js\";import{getExtentIntersector as u}from\"../geometry/support/intersects.js\";import{getGeometryExtent as c}from\"../geometry/support/extentUtils.js\";import{fromJSON as m,isPolygon as f,isExtent as y,getJsonType as R}from\"../geometry/support/jsonUtils.js\";import{getUnitString as S}from\"../core/unitUtils.js\";import{normalizeCentralMeridian as g}from\"../geometry/support/normalizeUtils.js\";import h from\"../layers/graphics/OptimizedGeometry.js\";import{quantizeOptimizedGeometry as d,convertToPoint as j,generalizeOptimizedGeometry as w,removeZMValues as G,convertToPolyline as U,convertToPolygon as M,convertToMultipoint as P,convertFromPolygon as I}from\"../layers/graphics/featureConversionUtils.js\";import{getCentroidOptimizedGeometry as v}from\"../layers/graphics/centroid.js\";import{checkProjectionSupport as C,project as O}from\"../layers/graphics/data/projectionSupport.js\";import{polygonContainsPoint as q,polygonContainsMultipoint as F}from\"../layers/graphics/contains.js\";const E=new t({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"}),N=Object.freeze({}),_=new h,b=new h,x=new h,J={esriGeometryPoint:j,esriGeometryPolyline:U,esriGeometryPolygon:M,esriGeometryMultipoint:P};function Z(e,t,r,i=e.hasZ,s=e.hasM){const n=e.hasZ&&i,o=e.hasM&&s;if(r){const a=d(x,t,e.hasZ,e.hasM,\"esriGeometryPoint\",r,i,s);return j(a,n,o)}return j(t,n,o)}function z(e,t,r){return\"esriGeometryPolygon\"===e.geometryType&&t&&(t.centroid||t.geometry)?(t.centroid||(t.centroid=v(new h,t.geometry,e.hasZ,e.hasM)),Z(e,t.centroid,r)):null}function B(e,t,r,i,s,n,o=t,a=r){const l=t&&o,p=r&&a,u=i?\"coords\"in i?i:i.geometry:null;if(!u)return null;if(s){let i=w(b,u,t,r,e,s,o,a);return n&&(i=d(x,i,l,p,e,n)),J[e](i,l,p)}if(n){const i=d(x,u,t,r,e,n,o,a);return J[e](i,l,p)}return G(_,u,t,r,o,a),J[e](_,l,p)}async function T(e,t,r){const{outFields:i,orderByFields:s,groupByFieldsForStatistics:n,outStatistics:o}=e;if(i)for(let e=0;e<i.length;e++)i[e]=i[e].trim();if(s)for(let e=0;e<s.length;e++)s[e]=s[e].trim();if(n)for(let e=0;e<n.length;e++)n[e]=n[e].trim();if(o)for(let e=0;e<o.length;e++)o[e].onStatisticField&&(o[e].onStatisticField=o[e].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),W(e,t,r)}async function D(e,t,r){return W(e,t,r)}async function W(t,r,i){if(!t)return null;let{where:a}=t;if(t.where=a=a&&a.trim(),(!a||/^1 *= *1$/.test(a)||r&&r===a)&&(t.where=null),!t.geometry)return t;let l=await async function(e){const{geometry:t,distance:r,units:i}=e;if(null==r||\"vertexAttributes\"in t)return t;const a=t.spatialReference,l=i?E.fromJSON(i):S(a),p=a&&(s(a)||n(a))?t:await C(a,o).then((()=>O(t,o)));return(await X())(p.spatialReference,p,r,l)}(t);if(t.distance=0,t.units=null,\"esriSpatialRelEnvelopeIntersects\"===t.spatialRel){const{spatialReference:e}=t.geometry;l=c(l),l.spatialReference=e}t.geometry=l,await C(l.spatialReference,i);const p=(await g(m(l)))[0];if(e(p))throw N;const u=p.toJSON(),f=await O(u,u.spatialReference,i);if(!f)throw N;return f.spatialReference=i,t.geometry=f,t}function k(e){return e&&A in e?JSON.parse(JSON.stringify(e,K)):e}const A=\"_geVersion\",K=(e,t)=>e!==A?t:void 0,Q={esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"intersects\",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:null},V={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},$={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},H={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};function L(){return import(\"../geometry/geometryEngineJSON.js\")}function X(){return L().then((e=>e.geodesicBuffer))}function Y(e,t,r,s,n){if(f(t)&&\"esriGeometryPoint\"===r&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e)){const e=I(new h,t,!1,!1);return i((t=>q(e,!1,!1,t)))}if(f(t)&&\"esriGeometryMultipoint\"===r){const r=I(new h,t,!1,!1);if(\"esriSpatialRelContains\"===e)return i((e=>F(r,!1,!1,e,s,n)))}if(y(t)&&\"esriGeometryPoint\"===r&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e))return i((e=>l(t,B(r,s,n,e))));if(y(t)&&\"esriGeometryMultipoint\"===r&&\"esriSpatialRelContains\"===e)return i((e=>p(t,B(r,s,n,e))));if(y(t)&&\"esriSpatialRelIntersects\"===e){const e=u(r);return i((i=>e(t,B(r,s,n,i))))}return L().then((i=>{const o=i[Q[e]].bind(null,t.spatialReference,t);return e=>o(B(r,s,n,e))}))}async function ee(e,t,i){const{spatialRel:s,geometry:n}=e;if(n){if(!0!==V[s])throw new r(\"feature-store:unsupported-query\",\"Unsupported query spatial relationship\",{query:e});if(a(n.spatialReference)&&a(i)){if(!function(e){return!0===$[R(e)]}(n))throw new r(\"feature-store:unsupported-query\",\"Unsupported query geometry type\",{query:e});if(!function(e){return!0===H[e]}(t))throw new r(\"feature-store:unsupported-query\",\"Unsupported layer geometry type\",{query:e});if(e.outSR)return C(e.geometry&&e.geometry.spatialReference,e.outSR)}}}function te(e){if(y(e))return!0;if(f(e)){for(const t of e.rings){if(5!==t.length)return!1;if(t[0][0]!==t[1][0]||t[0][0]!==t[4][0]||t[2][0]!==t[3][0]||t[0][1]!==t[3][1]||t[0][1]!==t[4][1]||t[1][1]!==t[2][1])return!1}return!0}return!1}export{N as Q,T as a,te as b,k as c,ee as d,B as e,z as f,Y as g,D as h,L as i,X as j,W as n,Z as t};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Logger.js\";function r(r,a,t){r.referencesGeometry();const n=a.readArcadeFeature();try{return r.evaluate({...t,$feature:n})}catch(r){return e.getLogger(\"esri.views.2d.support.arcadeOnDemand\").warn(\"Feature arcade evaluation failed:\",r),null}}export default r;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/has.js\";import{isNone as s}from\"../../../../core/maybe.js\";import{all as t}from\"../../../../core/promiseUtils.js\";import{createRendererExpression as r}from\"../../../../support/arcadeOnDemand.js\";import{diff as i,hasDiff as a}from\"../../../../core/accessorSupport/diffUtils.js\";import o from\"../../arcade/callExpressionWithCursor.js\";const c=import(\"../../../../layers/support/labelFormatUtils.js\");class n{constructor(e,s){this._canCacheExpressionValue=!1,this._sourceInfo=e,this._bitsets={computed:s.getBitset(s.createBitset())}}async updateSchema(r,o){const c=i(this._schema,o);if(this._schema=o,!o||s(c)||!a(c,\"attributes\"))return;e(\"esri-2d-update-debug\")&&console.debug(\"Applying Update - Store:\",c),this._bitsets.computed.clear(),r.targets[o.name]=!0;const n=o.attributes,p=[],u=[];for(const e in n){const s=n[e];switch(s.type){case\"field\":break;case\"expression\":p.push(this._createArcadeComputedField(s));break;case\"label-expression\":p.push(this._createLabelArcadeComputedField(s));break;case\"statistic\":u.push(s)}}this._computedFields=await t(p),this._canCacheExpressionValue=!this._computedFields.some((e=>\"expression\"===e.type&&e.expression.referencesScale())),this._statisticFields=u}setComputedAttributes(e,s,t,r){const i=this._bitsets.computed;if(!this._canCacheExpressionValue||!i.has(t)){i.set(t);for(const i of this._computedFields){const a=this._evaluateField(s,i,r);switch(i.resultType){case\"numeric\":e.setComputedNumericAtIndex(t,i.fieldIndex,a);break;case\"string\":e.setComputedStringAtIndex(t,i.fieldIndex,a)}}}}async _createArcadeComputedField(e){const s=this._sourceInfo.spatialReference,t=this._sourceInfo.fieldsIndex;return{...e,expression:await r(e.valueExpression,s,t)}}async _createLabelArcadeComputedField(e){const s=this._sourceInfo.spatialReference,t=this._sourceInfo.fields,{createLabelFunction:r}=await c,i=await r(e.label,t,s);return{...e,builder:i}}_evaluateField(e,s,t){switch(s.type){case\"label-expression\":{const t=e.readArcadeFeature();return s.builder.evaluate(t)||\"\"}case\"expression\":{const{expression:r}=s;return o(r,e,{$view:{scale:t}})}}}}export{n as Store2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isNone as t,unwrap as e}from\"../../../../core/maybe.js\";import s from\"../../../../core/Evented.js\";import{fromRect as a}from\"../../../../geometry/support/aaBoundingBox.js\";import{r}from\"../../../../chunks/rbush.js\";import{Store2D as n}from\"./Store2D.js\";function o(t){return(4294901760&t)>>>16}function i(t){return 65535&t}const d={getObjectId:t=>t.getObjectId(),getAttributes:t=>t.readAttributes(),getAttribute:(t,e)=>t.readAttribute(e),cloneWithGeometry:(t,e)=>t,getGeometry:t=>t.readHydratedGeometry(),getCentroid:(t,e)=>t.readCentroid()};class h extends n{constructor(t,e){super(t,e),this.featureAdapter=d,this.events=new s,this._featureSetsByInstance=new Map,this._objectIdToDisplayId=new Map,this._spatialIndexInvalid=!0,this._index=r(9,(t=>({minX:this._storage.getXMin(t),minY:this._storage.getYMin(t),maxX:this._storage.getXMax(t),maxY:this._storage.getYMax(t)})))}get storeStatistics(){return{featureCount:0,vertexCount:0}}onTileData(e,s,a){if(t(s.addOrUpdate))return s;this._featureSetsByInstance.set(s.addOrUpdate.instance,s.addOrUpdate),this._storage=a,s.addOrUpdate._storage=a;const r=s.addOrUpdate.getCursor();for(;r.next();){const t=r.getObjectId(),s=(n=r.instance,o=r.getIndex(),n<<16|o);let i=this._objectIdToDisplayId.get(t);i||(i=a.createDisplayId(),this._objectIdToDisplayId.set(t,i),this._spatialIndexInvalid=!0),r.setDisplayId(i),a.setInstanceId(i,s),this.setComputedAttributes(a,r,i,e.scale)}var n,o;return\"update\"===s.type&&(this._spatialIndexInvalid=!0),this.events.emit(\"changed\"),s}forEach(t){this._objectIdToDisplayId.forEach((e=>{const s=this._storage.getInstanceId(e),a=this._lookupFeature(s);t(a)}))}forEachUnsafe(t){this._objectIdToDisplayId.forEach((e=>{const s=this._storage.getInstanceId(e),a=o(s),r=i(s),n=this._getFeatureSet(a);n.setIndex(r),t(n)}))}forEachInBounds(t,s){const a=this._searchIndex(t);for(const t of a){const a=this.lookupFeatureByDisplayId(t,this._storage);s(e(a))}}forEachBounds(t,e,s){this._rebuildIndex();const r=[0,0,0,0];for(const n of t){if(!n.readGeometry())continue;const t=n.getDisplayId();r[0]=this._storage.getXMin(t),r[1]=this._storage.getYMin(t),r[2]=this._storage.getXMax(t),r[3]=this._storage.getYMax(t),e(a(s,r))}}sweepFeatures(t,e){this._objectIdToDisplayId.forEach(((s,a)=>{t.has(s)||(e.releaseDisplayId(s),this._objectIdToDisplayId.delete(a))})),this.events.emit(\"changed\")}sweepFeatureSets(t){this._featureSetsByInstance.forEach(((e,s)=>{t.has(s)||this._featureSetsByInstance.delete(s)}))}lookupObjectId(e,s){const a=this.lookupFeatureByDisplayId(e,s);return t(a)?null:a.getObjectId()}lookupDisplayId(t){return this._objectIdToDisplayId.get(t)}lookupFeatureByDisplayId(t,e){const s=e.getInstanceId(t);return this._lookupFeature(s)}lookupByDisplayIdUnsafe(t){const e=this._storage.getInstanceId(t),s=o(e),a=i(e),r=this._getFeatureSet(s);return r?(r.setIndex(a),r):null}hasInstance(t){return this._featureSetsByInstance.has(t)}_rebuildIndex(){if(!this._spatialIndexInvalid)return;this._index.clear();const t=[];this._objectIdToDisplayId.forEach((e=>{const s=this._storage.getInstanceId(e);this._storage.setBounds(e,this._lookupFeature(s))&&t.push(e)})),this._index.load(t),this._spatialIndexInvalid=!1}_lookupFeature(t){const e=o(t),s=i(t),a=this._getFeatureSet(e);if(!a)return null;const r=a.getCursor();return r.setIndex(s),r}_getFeatureSet(t){return this._featureSetsByInstance.get(t)}_searchIndex(t){this._rebuildIndex();const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this._index.search(e)}}export{h as FeatureStore2D,d as featureAdapter};\n"],"sourceRoot":""}